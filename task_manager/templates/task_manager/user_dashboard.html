{% extends 'task_manager/base.html' %}

{% block content %}

<h2 class="main-title">Добро пожаловать, {{ user.first_name }} {{ user.last_name }}!</h2>
<p class="main-info">Здесь вы можете отслеживать и заполнять свой отчет за сегодня</p>

<div class="card">
    <div class="card-body">
        <div class="card-row">
            <h5 class="card-title">
                <span>
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="22" viewBox="0 0 20 22" fill="none">
                        <path d="M15.8333 2.66667H15V1.83333C15 1.61232 14.9122 1.40036 14.7559 1.24408C14.5996 1.0878 14.3877 1 14.1667 1C13.9457 1 13.7337 1.0878 13.5774 1.24408C13.4211 1.40036 13.3333 1.61232 13.3333 1.83333V2.66667H6.66667V1.83333C6.66667 1.61232 6.57887 1.40036 6.42259 1.24408C6.26631 1.0878 6.05435 1 5.83333 1C5.61232 1 5.40036 1.0878 5.24408 1.24408C5.0878 1.40036 5 1.61232 5 1.83333V2.66667H4.16667C3.062 2.66799 2.00296 3.1074 1.22185 3.88852C0.440735 4.66963 0.00132321 5.72867 0 6.83333L0 16.8333C0.00132321 17.938 0.440735 18.997 1.22185 19.7782C2.00296 20.5593 3.062 20.9987 4.16667 21H15.8333C16.938 20.9987 17.997 20.5593 18.7782 19.7782C19.5593 18.997 19.9987 17.938 20 16.8333V6.83333C19.9987 5.72867 19.5593 4.66963 18.7782 3.88852C17.997 3.1074 16.938 2.66799 15.8333 2.66667ZM1.66667 6.83333C1.66667 6.17029 1.93006 5.53441 2.3989 5.06557C2.86774 4.59673 3.50363 4.33333 4.16667 4.33333H15.8333C16.4964 4.33333 17.1323 4.59673 17.6011 5.06557C18.0699 5.53441 18.3333 6.17029 18.3333 6.83333V7.66667H1.66667V6.83333ZM15.8333 19.3333H4.16667C3.50363 19.3333 2.86774 19.0699 2.3989 18.6011C1.93006 18.1323 1.66667 17.4964 1.66667 16.8333V9.33333H18.3333V16.8333C18.3333 17.4964 18.0699 18.1323 17.6011 18.6011C17.1323 19.0699 16.4964 19.3333 15.8333 19.3333Z" fill="#16AEDC"/>
                        <path d="M10 14.25C10.6904 14.25 11.25 13.6904 11.25 13C11.25 12.3096 10.6904 11.75 10 11.75C9.30964 11.75 8.75 12.3096 8.75 13C8.75 13.6904 9.30964 14.25 10 14.25Z" fill="#16AEDC"/>
                        <path d="M5.83398 14.25C6.52434 14.25 7.08398 13.6904 7.08398 13C7.08398 12.3096 6.52434 11.75 5.83398 11.75C5.14363 11.75 4.58398 12.3096 4.58398 13C4.58398 13.6904 5.14363 14.25 5.83398 14.25Z" fill="#16AEDC"/>
                        <path d="M14.166 14.25C14.8564 14.25 15.416 13.6904 15.416 13C15.416 12.3096 14.8564 11.75 14.166 11.75C13.4757 11.75 12.916 12.3096 12.916 13C12.916 13.6904 13.4757 14.25 14.166 14.25Z" fill="#16AEDC"/>
                    </svg>
                </span>
                <p>{{ today|date:"D d.m.Y" }}</p>
                
            </h5>
            <p class="card-text">
                Статус: 
                {% if timelog %}
                    Заполнено ({{ timelog.time }} часов)
                {% else %}
                    Не заполнено
                {% endif %}
            </p>
            {% if not timelog %}
                <!-- Форма для создания нового таймлога -->
                <form action="{% url 'user-dashboard' %}" method="post">
                    {% csrf_token %}
                    <!-- {{ form.as_p }} -->
                    <button type="submit" class="fill-in-report">
                        Заполнить отчет
                        <span>
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20" fill="none">
                                <path d="M2.31128 15.1984C2.34932 14.8561 2.36833 14.685 2.42012 14.525C2.46606 14.3831 2.53098 14.2481 2.6131 14.1235C2.70566 13.9832 2.82742 13.8614 3.07094 13.6179L14.0031 2.68577C14.9174 1.77141 16.3999 1.77141 17.3143 2.68577C18.2286 3.60013 18.2286 5.0826 17.3142 5.99696L6.38213 16.9291C6.1386 17.1726 6.01684 17.2943 5.87648 17.3869C5.75194 17.469 5.61688 17.5339 5.47496 17.5799C5.315 17.6317 5.14385 17.6507 4.80157 17.6887L2 18L2.31128 15.1984Z" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                        </span>
                    </button>
                </form>
            {% else %}
                <button class="btn btn-secondary" disabled>Отчет заполнен</button>
            {% endif %}
        </div>
    </div>
</div>
{% endblock %}
